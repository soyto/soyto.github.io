/*
 * Soyto.github.io (0.15.27)
 *     DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
 *         Version 2, December 2004
 * 
 * Copyright (C) 2012 Romain Lespinasse <romain.lespinasse@gmail.com>
 * 
 * Everyone is permitted to copy and distribute verbatim or modified
 * copies of this license document, and changing it is allowed as long
 * as the name is changed.
 * 
 * DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
 * TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
 * 
 * 0. You just DO WHAT THE FUCK YOU WANT TO.
 * 
 */
!function(a,b,c,d,e){"use strict";function f(a){var b={templateUrl:"/app/templates/index.html",controller:"mainApp.index.controller",resolve:{posts:["$hs",function(a){return a.$instantiate("blogService").getAll()}]}};a.when("/",b);var c={templateUrl:"/app/templates/ranking.html",controller:"mainApp.ranking.list.controller",resolve:{serverData:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getLastFromServer(b.current.params.serverName)}]}},d={templateUrl:"/app/templates/ranking.mobile.html",controller:"mainApp.ranking.list.mobile.controller",resolve:{serverData:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getLastFromServer(b.current.params.serverName)}]}};a.when("/ranking/:serverName",j?d:c);var e={templateUrl:"/app/templates/ranking.html",controller:"mainApp.ranking.list.controller",resolve:{serverData:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getFromServer(b.current.params.date,b.current.params.serverName)}]}},f={templateUrl:"/app/templates/ranking.mobile.html",controller:"mainApp.ranking.list.mobile.controller",resolve:{serverData:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getFromServer(b.current.params.date,b.current.params.serverName)}]}};a.when("/ranking/:serverName/:date",j?f:e);var g={templateUrl:"/app/templates/characterInfo.html",controller:"mainApp.characterInfo.controller",resolve:{characterInfo:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getCharacterInfo(b.current.params.serverName,b.current.params.characterID)}]}},h={templateUrl:"/app/templates/characterInfo.mobile.html",controller:"mainApp.characterInfo.controller",resolve:{characterInfo:["$hs","$route",function(a,b){return a.$instantiate("storedDataService").getCharacterInfo(b.current.params.serverName,b.current.params.characterID)}]}};a.when("/character/:serverName/:characterID",j?h:g)}function g(a){a.includeSpinner=!1,a.includeBar=!0}a.module("mainApp",["ngRoute","ngSanitize","angular-loading-bar","chart.js","mgcrea.ngStrap","ngAnimate"]),a.module("mainApp").constant("$moment",c).constant("$marked",d).constant("jQuery",e).config(["$routeProvider",f]).config(["cfpLoadingBarProvider",g]);var h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,j=h.test(b.userAgent)||i.test(b.userAgent.substr(0,4))}(angular,navigator,moment,marked,jQuery),function(a){"use strict";function b(a,b,d){function e(){a._name=c,b.$scope.setTitle([d.serverName,"->",d.characterName].join(" ")),a.serverName=d.serverName,a.character=d,a.chart=f(d),a.pagination=g(d.status,10),a.search=m}function f(a){if(0===a.status.length)return null;var b={options:{pointHitDetectionRadius:4},labels:[],series:[a.characterName],data:[[]]},c=a.status.slice(0,30);return c.sort(function(a,b){return a.date.getTime()-b.date.getTime()}),c.forEach(function(a){b.labels.push(i(a.date).format("MM-DD-YYYY")),b.data[0].push(a.gloryPoint)}),b}function g(a,b){var c={currentPage:0,elementsPerPage:b,numPages:parseInt(a.length/b),collection:a,current:a.slice(0,b),pages:[],goTo:function(a){var b=this;if(!(0>a||a>=this.numPages.length)){this.currentPage=a,this.current.splice(0,this.current.length);var c=this.currentPage*this.elementsPerPage,d=c+this.elementsPerPage;this.collection.slice(c,d).forEach(function(a){b.current.push(a)})}},next:function(){this.currentPage+1>=this.numPages||this.goTo(this.currentPage+1)},prev:function(){0!==this.currentPage&&this.goTo(this.currentPage-1)}};a.length%b>0&&c.numPages++,0===c.numPages&&(c.numPages=1);for(var d=0;d<c.numPages;d++)c.pages.push(d);return c}var h=b.$q,i=(b.$instantiate("$log"),b.$instantiate("$moment")),j=b.$instantiate("storedDataService"),k=b.$instantiate("$window"),l=b.$instantiate("$location"),m={term:"",text:"",results:null,loading:!1,selectedIndex:null};e(),a.onChange_searchText=function(a){return a.trim().length<3?(m.results=null,m.selectedIndex=null,void h.cancelTimeTrigger("mainApp.index.controller.search")):void h.timeTrigger("mainApp.index.controller.search",function(){return m.term=a,m.loading=!0,m.selectedIndex=null,k.ga("send","event","search_event_category","characterInfo_onChange_search_action",a),j.characterSearch(a).then(function(a){m.results=a,m.loading=!1})},500)},a.onKeydown_searchPanel=function(b){function c(){b.stopPropagation(),b.preventDefault(),a.$broadcast("ngScrollTo.scroll",{identifier:"search-result-"+m.selectedIndex})}if(null!=m.results&&0!==m.results.length)if(null===m.selectedIndex){if((40==b.keyCode||38==b.keyCode)&&(m.selectedIndex=0,c()),13==b.keyCode){var d=m.results[0];l.url("/character/"+d.serverName+"/"+d.id)}}else if(40!=b.keyCode||b.ctrlKey)if(40==b.keyCode&&b.ctrlKey)m.selectedIndex=m.results.length-1,c();else if(38!=b.keyCode||b.ctrlKey)if(38==b.keyCode&&b.ctrlKey)m.selectedIndex=0,c();else if(13==b.keyCode){var d=m.results[m.selectedIndex];l.url("/character/"+d.serverName+"/"+d.id)}else a.$broadcast("ngScrollTo.scroll",{identifier:"search-input"});else m.selectedIndex--,-1===m.selectedIndex&&(m.selectedIndex=m.results.length-1),c();else m.selectedIndex++,m.selectedIndex==m.results.length&&(m.selectedIndex=0),c()}}var c="mainApp.characterInfo.controller";a.module("mainApp").controller(c,["$scope","$hs","characterInfo",b])}(angular),function(a){"use strict";function b(a,b,d){function e(){a._name=c,a.servers=h.serversList,a.lastServerUpdateData=h.getLastServerData(),k=d,k.forEach(function(a){a.htmlContent=g(a.content)}),a.posts=k.slice(0,1),a.posts_count=k.length,a.search=l,b.$scope.setTitle("Soyto.github.io"),b.$scope.setNav("home")}var f=b.$q,g=(b.$instantiate("$log"),b.$instantiate("$marked")),h=b.$instantiate("storedDataService"),i=b.$instantiate("$window"),j=b.$instantiate("$location"),k=null,l={term:"",text:"",results:null,loading:!1,selectedIndex:null};e(),a.onChange_searchText=function(a){return a.trim().length<3?(l.results=null,l.selectedIndex=null,void f.cancelTimeTrigger("mainApp.index.controller.search")):void f.timeTrigger("mainApp.index.controller.search",function(){return l.term=a,l.loading=!0,l.selectedIndex=null,i.ga("send","event","search_event_category","index_search_action",a),h.characterSearch(a).then(function(a){l.results=a,l.loading=!1})},500)},a.onKeydown_searchPanel=function(b){function c(){b.stopPropagation(),b.preventDefault(),a.$broadcast("ngScrollTo.scroll",{identifier:"search-result-"+l.selectedIndex})}if(null!=l.results&&0!==l.results.length)if(null===l.selectedIndex){if((40==b.keyCode||38==b.keyCode)&&(l.selectedIndex=0,c()),13==b.keyCode){var d=l.results[0];j.url("/character/"+d.serverName+"/"+d.id)}}else if(40!=b.keyCode||b.ctrlKey)if(40==b.keyCode&&b.ctrlKey)l.selectedIndex=l.results.length-1,c();else if(38!=b.keyCode||b.ctrlKey)if(38==b.keyCode&&b.ctrlKey)l.selectedIndex=0,c();else if(13==b.keyCode){var d=l.results[l.selectedIndex];j.url("/character/"+d.serverName+"/"+d.id)}else a.$broadcast("ngScrollTo.scroll",{identifier:"search-input"});else l.selectedIndex--,-1===l.selectedIndex&&(l.selectedIndex=l.results.length-1),c();else l.selectedIndex++,l.selectedIndex==l.results.length&&(l.selectedIndex=0),c()},a.showMorePosts=function(b){var c=a.posts.length;a.posts=a.posts.concat(k.slice(c,c+b))}}var c="mainApp.index.controller";a.module("mainApp").controller(c,["$scope","$hs","posts",b])}(angular),function(a){"use strict";function b(b,d,e,f,g,h,i){function j(){g.$scope.setTitle(i.serverName+" -> "+i.date),g.$scope.setNav("ranking.list"),d.serverData=i,d.textSearch="",d.searchDate=i.date,d.currentServer=h.serversList.first(function(a){return a.name==i.serverName}),d.storedDates=h.storedDates,d.servers=h.serversList,d.classes=h.characterClassIds.where(function(a){return a.id}),d.ranks=h.characterSoldierRankIds.where(function(a){return a.id>=10}).sort(function(a,b){return b.id-a.id});var b={currentPage:0,numElementsPerPage:100,numPages:-1,numElements:-1,pageNumbers:[],fullCollection:[],currentPageElements:[],next:p,previous:q,goTo:r};d.pagination={},d.pagination.elyos=a.copy(b),d.pagination.asmodians=a.copy(b),d.pagination.vs=a.copy(b),n(i),s=m(i),o(i.data.elyos.select(k),d.pagination.elyos),o(i.data.asmodians.select(k),d.pagination.asmodians),o(s,d.pagination.vs),d.$watch("textSearch",function(a){l(a,d.selectedClass,d.selectedRank)}),d.$watch("selectedClass",function(a){l(d.textSearch,a,d.selectedRank)}),d.$watch("selectedRank",function(a){l(d.textSearch,d.selectedClass,a)})}function k(a){return a?(a.characterClass=h.getCharacterClass(a.characterClassID),a.soldierRank=h.getCharacterRank(a.soldierRankID),a):{}}function l(a,b,c){function e(a,b,c,d){var e=!1,f=!1,g=!1;if(b){if(a&&a.characterName){var i=b.toLowerCase(),j=a.characterName?a.characterName.toLowerCase():"",k=a.guildName?a.guildName.toLowerCase():"",l=h.getCharacterClass(a.characterClassID).name.toLowerCase(),m=h.getCharacterRank(a.soldierRankID).name.toLowerCase();e=j.indexOf(i)>=0||k.indexOf(i)>=0||l.indexOf(i)>=0||m.indexOf(i)>=0}}else e=!0;return c?a&&(f=a.characterClassID==c.id):f=!0,d?a&&(g=a.soldierRankID==d.id):g=!0,e&&f&&g}t&&f.cancel(t),t=f(function(){return b||a||c?(d.elyosData=o(i.data.elyos.where(function(d){return e(d,a,b,c)}).select(k),d.pagination.elyos),d.asmodianData=o(i.data.asmodians.where(function(d){return e(d,a,b,c)}).select(k),d.pagination.asmodians),void(d.versusData=o(s.where(function(d){return e(d.elyo,a,b,c)||e(d.asmodian,a,b,c)}),d.pagination.vs))):(d.elyosData=o(i.data.elyos.select(k),d.pagination.elyos),d.asmodianData=o(i.data.asmodians.select(k),d.pagination.asmodians),void(d.versusData=o(s,d.pagination.vs)))},500)}function m(a){for(var b=[],c=0;1e3>c;c++)b.push({position:c+1,elyo:{},asmodian:{}});return a.data.elyos.select(k).forEach(function(a){b[a.position-1].elyo=a}),a.data.asmodians.select(k).forEach(function(a){b[a.position-1].asmodian=a}),b}function n(a){var b=10,c=1e3/b;d.chart={},d.chart.options={responsive:!0,maintainAspectRatio:!1},d.chart.labels=[],d.chart.series=["Elyos","Asmodians"],d.chart.data=[[],[]],d.chart.colors=["#DD66DD","#97BBCD"];for(var e=0;b>=e;e++){var f=1e3-e*c;0===f&&(f=1),0===e&&(f=999);var g=a.data.elyos.first(function(a){return a.position==f}),h=a.data.asmodians.first(function(a){return a.position==f});d.chart.labels.push(f),d.chart.data[0].push(g?g.gloryPoint:0),d.chart.data[1].push(h?h.gloryPoint:0)}}function o(a,b){b.currentPage=0,b.numPages=parseInt(a.length/b.numElementsPerPage),b.numElements=a.length,b.fullCollection=a,a.length%b.numElementsPerPage>0&&(b.numPages+=1),0===b.numPages&&(b.numPages=1),b.currentPageElements=b.fullCollection.slice(0,b.numElementsPerPage),b.pageNumbers=Array.apply(null,{length:b.numPages}).map(function(a,b){return b+1},Number)}function p(){var a=this;if(!(a.currentPage+1>=a.numPages)){a.currentPage+=1;var b=a.currentPage*a.numElementsPerPage;a.currentPageElements=a.fullCollection.slice(b,a.numElementsPerPage+b)}}function q(){var a=this;if(0!==a.currentPage){a.currentPage-=1;var b=a.currentPage*a.numElementsPerPage;a.currentPageElements=a.fullCollection.slice(b,a.numElementsPerPage+b)}}function r(a){var b=this;if(a>0&&a<=b.numPages){b.currentPage=a-1;var c=b.currentPage*b.numElementsPerPage;b.currentPageElements=b.fullCollection.slice(c,b.numElementsPerPage+c)}}d._name=c;var s=[],t=null;j(),d.goTo=function(a,b){(a.name!=i.serverName||b!=i.date)&&e.path("/ranking/"+a.name+"/"+b)}}var c="mainApp.ranking.list.controller";a.module("mainApp").controller(c,["$log","$scope","$location","$timeout","helperService","storedDataService","serverData",b])}(angular),function(a){"use strict";function b(a,b,d,e,f,g){function h(){f.$scope.setTitle(g.serverName+" -> "+g.date),f.$scope.setNav("ranking.list"),a.pagination={elyos:{currentPage:0,numElementsPerPage:50,numPages:-1,numElements:-1},asmodians:{currentPage:0,numElementsPerPage:50,numPages:-1,numElements:-1}},a.serverData=g,a.storedDates=e.storedDates,a.servers=e.serversList,a.classes=e.characterClassIds.where(function(a){return a.id}),a.ranks=e.characterSoldierRankIds.where(function(a){return a.id>=10}).sort(function(a,b){return b.id-a.id}),a.searchDate=g.date,a.currentServer=e.serversList.first(function(a){return a.name==g.serverName}),a.elyosData=k(g.data.elyos.select(i),a.pagination.elyos),a.asmodianData=k(g.data.asmodians.select(i),a.pagination.asmodians),a.textSearch="",a.selectedClass="",a.filters={},a.filters.show=!1}function i(a){return a?(a.characterClass=e.getCharacterClass(a.characterClassID),a.soldierRank=e.getCharacterRank(a.soldierRankID),a):{}}function j(b,c,d){function f(c,d,f,g){var h=!1,i=!1,j=!1;if(d){if(c&&c.characterName){var k=b.toLowerCase(),l=c.characterName?c.characterName.toLowerCase():"",m=c.guildName?c.guildName.toLowerCase():"",n=e.getCharacterClass(c.characterClassID).name.toLowerCase(),o=e.getCharacterRank(c.soldierRankID).name.toLowerCase();h=l.indexOf(k)>=0||m.indexOf(k)>=0||n.indexOf(k)>=0||o.indexOf(k)>=0}}else h=!0;return f?c&&(i=c.characterClassID==f.id):i=!0,g?c&&(j=c.soldierRankID==g.id):j=!0,a.filteredData=!0,h&&i&&j}a.pagination.elyos.currentPage=0,a.pagination.asmodians.currentPage=0;var h=function(b){return k(b,a.pagination.elyos)},j=function(b){return k(b,a.pagination.asmodians)};return c||b||d?(a.elyosData=h(g.data.elyos.where(function(a){return f(a,b,c,d)}).select(i)),void(a.asmodianData=j(g.data.asmodians.where(function(a){return f(a,b,c,d)}).select(i)))):(a.elyosData=h(g.data.elyos.select(i)),a.asmodianData=j(g.data.asmodians.select(i)),void(a.filteredData=!1))}function k(a,b){var c=b.currentPage*b.numElementsPerPage;b.numElements=a.length,b.elements=a,b.numPages=parseInt(a.length/b.numElementsPerPage),a.length%b.numElementsPerPage>0&&(b.numPages+=1),0===b.numPages&&(b.numPages=1);var d=a.slice(c,b.numElementsPerPage+c);return d}a._name=c,a.filteredData=!1,a.page={},a.page.elyos={},a.page.asmodians={},h(),a.goTo=function(a,b){(a.name!=g.serverName||b!=g.date)&&d.path("/ranking/"+a.name+"/"+b)},a.page.elyos.goTo=function(){var c=b.prompt("page",a.pagination.elyos.currentPage+1);c&&!isNaN(c)&&(c=parseInt(c),c&&c>0&&c<=a.pagination.elyos.numPages&&(a.pagination.elyos.currentPage=c-1,a.elyosData=k(a.pagination.elyos.elements,a.pagination.elyos)))},a.page.elyos.next=function(){a.pagination.elyos.currentPage+1>=a.pagination.elyos.numPages||(a.pagination.elyos.currentPage+=1,a.elyosData=k(a.pagination.elyos.elements,a.pagination.elyos))},a.page.elyos.previous=function(){0!==a.pagination.elyos.currentPage&&(a.pagination.elyos.currentPage-=1,a.elyosData=k(a.pagination.elyos.elements,a.pagination.elyos))},a.page.asmodians.next=function(){a.pagination.asmodians.currentPage+1>=a.pagination.asmodians.numPages||(a.pagination.asmodians.currentPage+=1,a.asmodianData=k(a.pagination.asmodians.elements,a.pagination.asmodians))},a.page.asmodians.previous=function(){0!==a.pagination.asmodians.currentPage&&(a.pagination.asmodians.currentPage-=1,a.asmodianData=k(a.pagination.asmodians.elements,a.pagination.asmodians))},a.page.asmodians.goTo=function(){var c=b.prompt("page",a.pagination.asmodians.currentPage+1);c&&!isNaN(c)&&(c=parseInt(c),c&&c>0&&c<=a.pagination.asmodians.numPages&&(a.pagination.asmodians.currentPage=c-1,a.asmodianData=k(a.pagination.asmodians.elements,a.pagination.asmodians)))},a.search=function(){j(a.textSearch,a.selectedClass,a.selectedRank)},a.clear=function(){a.textSearch="",a.selectedClass="",j("",null,null),a.textSearch="",a.selectedClass=null,a.selectedRank=null}}var c="mainApp.ranking.list.mobile.controller";a.module("mainApp").controller(c,["$scope","$window","$location","storedDataService","helperService","serverData",b])}(angular),function(a){"use strict";function b(a){var b=a.$instantiate("$rootScope"),d=a.$instantiate("$window"),e=a.$instantiate("$location"),f=a.$instantiate("cfpLoadingBar");b._name=c,b.$on("$routeChangeStart",function(){f.start()}),b.$on("$viewContentLoaded",function(a){f.complete(),d.ga("send","pageview",{page:e.path()})})}var c="mainApp.main.controller";a.module("mainApp").controller(c,["$hs",b])}(angular),function(a){"use strict";a.module("mainApp").directive("fbCommentPlugin",["$window",function(a){function b(a,b,c){return'<div class="fb-comments" data-href="'+a+'" data-numposts="'+b+'" data-colorsheme="'+c+'"></div>'}return{restrict:"A",scope:{},link:function(c,d,e){e.$observe("pageHref",function(c){var f=c,g=e.numposts||5,h=e.colorscheme||"light";d.html(b(f,g,h)),a.FB&&a.FB.XFBML.parse(d[0])})}}}])}(angular),function(a){"use strict";function b(a){function b(a,b,f){function g(a){return a.scrollTop}function h(a,b,c){var d=null;return d=a.scrollTop<b.offsetTop-b.margin.top?b.offsetTop-a.height+b.height+c+b.margin.bottom:b.offsetTop-c-b.margin.top,0>d&&(d=0),d}var i=f[c],j=e(b);a.$on(c+".scroll",function(b,c){if(("string"!=typeof c||c===i)&&c.identifier===i){var k=null,l=null;void 0===f.parentScroll?(l=e(d.document.body),k={offsetTop:Math.round(d.document.body.offsetTop),scrollTop:Math.round(d.document.body.scrollTop),height:Math.round(d.innerHeight),window:null},k.window=k.scrollTop+k.height):(l=e.parents(f.parentScroll),k={offsetTop:Math.round(l.offset().top),scrollTop:Math.round(l.scrollTop()),height:Math.round(l.height()),window:null},k.window=k.scrollTop+k.height);var m={offsetTop:Math.round(j.offset().top),height:Math.round(j.height()),window:null,margin:{top:0,bottom:0}};if(m.window=m.offsetTop+m.height,void 0!==f.ngScrollToElementMargin){var n=a.$eval(f.ngScrollToElementMargin);m.margin.top=parseInt(n.top),m.margin.bottom=parseInt(n.bottom)}var o=k.scrollTop<=m.offsetTop-m.margin.top,p=k.window>m.offsetTop,q=k.scrollTop<=m.window-m.margin.top,r=k.window>m.window,s=o&&p,t=q&&r,u=k.height<m.height,v=null;if(u||s&&t){if(!u||s&&t)return;v=g(m)}else v=h(k,m,parseInt(f.ngScrollToOffset));l.animate({scrollTop:v},200,"swing")}})}var d=(a.$q,a.$instantiate("$log"),a.$instantiate("$window")),e=a.$instantiate("jQuery");return{restrict:"A",link:b}}var c="ngScrollTo";a.module("mainApp").directive(c,["$hs",b])}(angular),function(a){"use strict";function b(a){function b(a,b,e){a.isLoading=!0,a.streamData=null;var f=a.twitchChannel.split("/");f=f[f.length-1],c.getChannel(f).then(function(b){a.channelData=b}).then(function(){c.getStream(f).then(function(b){a.channelStream=b.stream,a.isLoading=!1})});var g=d(function(){c.getStream(f).then(function(b){a.channelStream=b.stream})},6e4);a.$on("$destroy",function(){d.cancel(g)})}var c=(a.$instantiate("$log"),a.$instantiate("twitchService")),d=a.$instantiate("$interval");return{restrict:"E",link:b,scope:{twitchChannel:"=twitchChannel"},templateUrl:"/app/templates/directives/twitchPanel.html"}}var c="twitchPanel";a.module("mainApp").directive(c,["$hs",b])}(angular),function(a){"use strict";function b(a){var b=(a.$instantiate("$log"),a.$instantiate("$http")),c=a.$q,d=this,e=null;d.getAll=function(){return null!==e?c.resolve(e):c.likeNormal(b({url:"data/Posts/posts.json",method:"GET"})).then(function(a){return a=a.sort(function(a,b){return new Date(b.date).getTime()-new Date(a.date).getTime()}),e=a,a})}}a.module("mainApp").service("blogService",["$hs",b])}(angular),function(a){"use strict";function b(a){function b(){if(null!==g)return d.resolve(g);var a={characterPics:null,characterSocial:null};return d.likeNormal(e.get("/app/data/characterPics.json")).then(function(b){return a.characterPics=b,d.likeNormal(e.get("/app/data/characterSocial.json")).then(function(b){return a.characterSocial=b,g=a,a})})}function c(a,b,c){var d=a.first(function(a){return a.serverName==c.serverName&&a.characterID==c.characterID});return d?d[b]:null}var d=a.$q,e=(a.$instantiate("$log"),a.$instantiate("$http")),f=this,g=null;f.setCharacterSocialData=function(a){return b().then(function(b){a.social={};var d=c(b.characterPics,"pic",a);return d?a.pictureURL=d:a.pictureURL="//placehold.it/450X300/DD66DD/EE77EE/?text="+a.characterName,a.social=c(b.characterSocial,"buttons",a),a})}}a.module("mainApp").service("characterSocialService",["$hs",b])}(angular),function(a){"use strict";function b(a,b,c,d){var e=this;a.soyto=e,e.$q=b,e.storedDataService=d}a.module("mainApp").service("consoleService",["$window","$q","helperService","storedDataService",b])}(angular),function(a){"use strict";function b(a){var b=(a.get("$log"),a.get("$q"),a.get("$rootScope")),e=a.get("$window"),f=this;f.$instantiate=function(b){return a.get(b)},f.sortDates=function(a){return a=a.sort(function(a,b){var c=a.split("-"),d=b.split("-");return c=[parseInt(c[2]),parseInt(c[0]),parseInt(c[1])],d=[parseInt(d[2]),parseInt(d[0]),parseInt(d[1])],c[0]>d[0]?1:c[0]<d[0]?-1:c[1]>d[1]?1:c[1]<d[1]?-1:c[2]>d[2]?1:c[2]<d[2]?-1:0})},f.$scope={setTitle:function(a){b.title=a},setNav:function(a){b.navMenu=a}},f.navigator={isMobile:function(){return c.test(e.navigator.userAgent)||d.test(e.navigator.userAgent.substr(0,4))}},f.$q=a.get("helperService.$q").$setParent(f).$q}a.module("mainApp").service("helperService",["$injector",b]),a.module("mainApp").service("$hs",["$injector",b]);var c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,d=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i}(angular),function(a){"use strict";function b(a){function b(){return q.storedDates[q.storedDates.length-1]}function c(){if(null!==p){var a=i.defer();return l(function(){a.resolve(p)}),a.promise}var b=d+"/data/Servers/Characters/charactersSheet.json";return i.likeNormal(j.get(b)).then(function(a){return a.forEach(function(a){a.characterClass=q.getCharacterClass(a.characterClassID),a.soldierRank=q.getCharacterRank(a.characterSoldierRankID),a.raceName=1==a.raceID?"Asmodian":"Elyos"}),p=a,a})}function e(a,b){var c={serverName:a,characterID:b.characterID,characterName:b.characterName,names:b.names,characterClassID:b.characterClassID,characterClass:q.getCharacterClass(b.characterClassID),raceID:b.raceID,raceName:1==b.raceID?"Asmodian":"Elyos",guildID:b.guildID,guildName:b.guildName,guilds:b.guilds,gloryPoint:b.gloryPoint,gloryPointChange:b.gloryPointChange,position:b.position,rankingPositionChange:b.rankingPositionChange,soldierRankID:b.soldierRankID,soldierRank:q.getCharacterRank(b.soldierRankID),status:b.status};return f(c.names,"date").sort(g("date","desc")),f(c.guilds,"date").sort(g("date","desc")),f(c.status,"date").sort(g("date","desc")),c.status.forEach(function(a){a.soldierRank=q.getCharacterRank(a.soldierRankID)}),q.removeOldNames_requests.every(function(a){return a.serverName==c.serverName&&a.characterID==c.characterID?(c.names.splice(1,c.names.length-1),!1):!0}),q.removeOldGuildNames_requests.every(function(a){return a.serverName==c.serverName&&a.characterID==c.characterID?(c.guilds.splice(1,c.guilds.length-1),!1):!0}),m.setCharacterSocialData(c)}function f(a,b){return a.forEach(function(a){a[b]=new Date(a[b])}),a}function g(a,b){return"asc"==b?function(b,c){return b[a].getTime()-c[a].getTime()}:function(b,c){return c[a].getTime()-b[a].getTime()}}function h(a){var b=new Date(a);if(!isNaN(b.getTime()))return b;var c=a.split("-");return new Date(parseInt(c[2]),parseInt(c[0])-1,parseInt(c[1]))}var i=a.$q,j=(a.$instantiate("$log"),a.$instantiate("$http")),k=a.$instantiate("$window"),l=a.$instantiate("$timeout"),m=a.$instantiate("characterSocialService"),n=[],o=[],p=null;k.$cacheServerData=n,k.$cacheCharacterInfo=o;var q=this;q.removeOldNames_requests=[{serverName:"Hellion",characterID:430586},{serverName:"Deyla",characterID:825556},{serverName:"Urtem",characterID:1508483},{serverName:"Hellion",characterID:495423},{serverName:"Hyperion",characterID:11600},{serverName:"Antriksha",characterID:863503},{serverName:"Antriksha",characterID:642109}],q.removeOldGuildNames_requests=[{serverName:"Hellion",characterID:495423},{serverName:"Deyla",characterID:1266763},{serverName:"Hyperion",characterID:11600},{serverName:"Antriksha",characterID:863503}],q.serversList=[{id:53,name:"Antriksha"},{id:49,name:"Barus"},{id:52,name:"Deyla"},{id:54,name:"Hellion"},{id:55,name:"Hyperion"},{id:50,name:"Loki"},{id:37,name:"Thor"},{id:40,name:"Urtem"}],q.storedDates=a.sortDates(k.storedDates),q.characterSoldierRankIds=[{id:0,name:"Soldier Rank 10"},{id:1,name:"Soldier Rank 9"},{id:2,name:"Soldier Rank 8"},{id:3,name:"Soldier Rank 7"},{id:4,name:"Soldier Rank 6"},{id:5,name:"Soldier Rank 5"},{id:6,name:"Soldier Rank 4"},{id:6,name:"Soldier Rank 3"},{id:7,name:"Soldier Rank 2"},{id:9,name:"Soldier Rank 1"},{id:10,name:"Army 1-Star Officer"},{id:11,name:"Army 2-Star Officer"},{id:12,name:"Army 3-Star Officer"},{id:13,name:"Army 4-Star Officer"},{id:14,name:"Army 5-Star Officer"},{id:15,name:"General"},{id:16,name:"Great general"},{id:17,name:"Commander"},{id:18,name:"Governor"}],q.characterClassIds=[{},{id:1,name:"Gladiator",icon:"img/gladiator.jpg"},{id:2,name:"Templar",icon:"img/templar.jpg"},{},{id:4,name:"Assassin",icon:"img/assassin.jpg"},{id:5,name:"Ranger",icon:"img/ranger.jpg"},{},{id:7,name:"Sorcerer",icon:"img/sorc.jpg"},{id:8,name:"Spiritmaster",icon:"img/sm.jpg"},{},{id:10,name:"Cleric",icon:"img/cleric.jpg"},{id:11,name:"Chanter",icon:"img/chanter.jpg"},{},{id:13,name:"Aethertech",icon:"img/gladiator.jpg"},{id:14,name:"Gunner",icon:"img/gunner.png"},{},{id:16,name:"Bard",icon:"img/barde.png"}],q.getCharacterRank=function(a){return q.characterSoldierRankIds[a]},q.getCharacterClass=function(a){return q.characterClassIds[a]},q.getFromServer=function(a,b){var c=n.first(function(c){return c.serverName==b&&c.date==a});return c?i.resolve(c):i.likeNormal(j({url:d+"data/Servers/"+a+"/"+b+".json",method:"GET"})).then(function(c){var d={serverName:b,date:a,data:c};return n.push(d),d})},q.getLastFromServer=function(a){return q.getFromServer(b(),a)},q.getCharacterInfo=function(a,b){var c=o.first(function(c){return c.serverName==a&&c.characterID==b});return c?i.resolve(c):j({url:d+"data/Servers/Characters/"+a+"/"+b+".json",method:"GET"}).then(function(b){return b.data.status.forEach(function(a){a.date=h(a.date)}),b.data.names.forEach(function(a){a.date=h(a.date)}),b.data.guilds.forEach(function(a){a.date=h(a.date)}),e(a,b.data).then(function(a){return o.push(a),a})})},q.getLastServerData=function(){return b()},q.characterSearch=function(a){var b=a.trim().toLowerCase();return c().then(function(a){var c=a.where(function(a){return a.characterName.toLowerCase().indexOf(b)>=0});return c.sort(function(a,c){var d=a.characterName.toLowerCase().indexOf(b),e=c.characterName.toLowerCase().indexOf(b);if(d===e){var f=a.characterName.length,g=c.characterName.length;return f==g?a.characterName.toLowerCase().localeCompare(c.characterName.toLowerCase()):f-g}return d-e}),c})}}var c=!1,d=c?"":"http://91.184.11.238/";a.module("mainApp").service("storedDataService",["$hs",b])}(angular),function(a){"use strict";function b(a){var b=a.$q,c=(a.$instantiate("$log"),a.$instantiate("$http")),e=(a.$instantiate("$window"),this);e.getChannel=function(a){return b.likeNormal(c({ignoreLoadingBar:!0,url:"https://api.twitch.tv/kraken/channels/"+a,method:"GET",headers:{"client-ID":d}}))},e.getStream=function(a){return b.likeNormal(c({ignoreLoadingBar:!0,url:"https://api.twitch.tv/kraken/streams/"+a,method:"GET",headers:{"client-ID":d}}))}}var c="twitchService",d="vauqjofyej3848u68hpah3aqjjvjcl";a.module("mainApp").service(c,["$hs",b])}(angular),function(a){"use strict";function b(a){var b=this,c=a.get("$q"),e=a.get("$timeout"),f=null,g={};b.$setParent=function(a){return f=a,b},b.$q=c,b.$q.likeHttp=function(a){if(a.promise)return a.promise.success=function(b){return a.promise.then(b),a.promise},a.promise.error=function(b){return a.promise["catch"](b),a.promise},a;if(a.then){var d=b.likeHttp(c.defer());return a.then(d.resolve),a["catch"](d["catch"]),d.promise}},b.$q.likeNormal=function(a){var b=c.defer();return a.success(b.resolve).error(b.reject),b.promise},b.$q.timeTrigger=function(a,b,c){return c||(c=d),g[a]&&e.cancel(g[a]),g[a]=e(b,c),g[a]},b.$q.cancelTimeTrigger=function(a){g[a]&&e.cancel(g[a])}}var c="helperService.$q",d=1e3;a.module("mainApp").service(c,["$injector",b])}(angular);